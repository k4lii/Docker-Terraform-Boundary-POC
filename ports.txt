listener: listeners configures the addresses and ports on which Boundary will respond to requests


By default, the API listener runs on :9200
Listener 1: tcp (addr: "0.0.0.0:9200", max_request_duration: "1m30s", purpose: "api")

The cluster listener (currently used for worker communication) uses :9201
Listener 2: tcp (addr: "0.0.0.0:9201", max_request_duration: "1m30s", purpose: "cluster")

Workers will have only one listener, marked for proxy purpose.
Listener 3: tcp (addr: "0.0.0.0:9202", max_request_duration: "1m30s", purpose: "proxy")



Note:
le client s'authentifie au controller
le client est authentifier, le controller le redirige sur un worker dispo sur le port 9202 qui sert de proxy vers redis(6379)


HypothÃ¨se PB:

boundary connect -exec redis-cli -target-id ttcp_MjnKlzE406
avec cette commande, je suis bien rediriger sur le worker, les logs m'inidique que ma session est active:

LOGS BOUNDARY SERV:
2021-01-29T13:35:16.863Z [INFO]  controller.worker-handler: session activated: session_id=s_4lGJAqmM5Z target_id=ttcp_MjnKlzE406 user_id=u_BvSjfy7NZP host_set_id=hsst_p1Ocoy6k6k host_id=hst_MXHpgr26aq
2021-01-29T13:35:16.867Z [INFO]  controller.worker-handler: authorized connection: session_id=s_4lGJAqmM5Z connection_id=sc_m9JCI8gpTA connections_left=0
2021-01-29T13:35:16.872Z [INFO]  controller.worker-handler: connection established: session_id=s_4lGJAqmM5Z connection_id=sc_m9JCI8gpTA client_tcp_address=192.168.96.1 client_tcp_port=40406 endpoint_tcp_address=192.168.96.2 endpoint_tcp_port=6379

EN CLI:
Could not connect to Redis at 127.0.0.1:6379: Connection refused
not connected> ping

le worker n'arrive pas a reach le redis